# Vagrant with Virtualbox and Private IPs

Setup multiple machines with vagrant and virtualbox. Also capable of assigning private IP addresses.

## Getting Started



### Prerequisities and Install

Trying this on ubuntu Xenial 16.04, Virtualbox (came with default repository) and Vagrant

```
sudo apt-get install virtualbox vde2 virtualbox-guest-additions-iso
sudo dpkg -i https://releases.hashicorp.com/vagrant/1.8.4/vagrant_1.8.4_i686.deb
vagrant box add ubuntu/xenial64
vagrant box add centos/7
```

### Fireup the instances
Command to fireup the instance from with the folder where Vagrantfile resides
```
vagrant up
```

On Successfull configuration we get something like the below
````
> vagrant up
Bringing machine 'ubuntu_host1' up with 'virtualbox' provider...
Bringing machine 'centos_host1' up with 'virtualbox' provider...
==> ubuntu_host1: Importing base box 'ubuntu/xenial64'...
==> ubuntu_host1: Matching MAC address for NAT networking...
==> ubuntu_host1: Checking if box 'ubuntu/xenial64' is up to date...
==> ubuntu_host1: Setting the name of the VM: multi-machine-setup_ubuntu_host1_1474754470745_5479
==> ubuntu_host1: Clearing any previously set network interfaces...
==> ubuntu_host1: Preparing network interfaces based on configuration...
    ubuntu_host1: Adapter 1: nat
    ubuntu_host1: Adapter 2: hostonly
==> ubuntu_host1: Forwarding ports...
    ubuntu_host1: 22 (guest) => 2222 (host) (adapter 1)
==> ubuntu_host1: Running 'pre-boot' VM customizations...
==> ubuntu_host1: Booting VM...
==> ubuntu_host1: Waiting for machine to boot. This may take a few minutes...
    ubuntu_host1: SSH address: 127.0.0.1:2222
    ubuntu_host1: SSH username: ubuntu
    ubuntu_host1: SSH auth method: password
    ubuntu_host1: 
    ubuntu_host1: Inserting generated public key within guest...
    ubuntu_host1: Removing insecure key from the guest if it's present...
    ubuntu_host1: Key inserted! Disconnecting and reconnecting using new SSH key...
==> ubuntu_host1: Machine booted and ready!
==> ubuntu_host1: Checking for guest additions in VM...
==> ubuntu_host1: Setting hostname...
==> ubuntu_host1: Configuring and enabling network interfaces...
==> ubuntu_host1: Mounting shared folders...
    ubuntu_host1: /vagrant => /home/joseph/Projects/vagrant-getting-started/multi-machine-setup
==> centos_host1: Importing base box 'centos/7'...
==> centos_host1: Matching MAC address for NAT networking...
==> centos_host1: Checking if box 'centos/7' is up to date...
==> centos_host1: Setting the name of the VM: multi-machine-setup_centos_host1_1474754508585_91385
==> centos_host1: Fixed port collision for 22 => 2222. Now on port 2200.
==> centos_host1: Clearing any previously set network interfaces...
==> centos_host1: Preparing network interfaces based on configuration...
    centos_host1: Adapter 1: nat
    centos_host1: Adapter 2: hostonly
==> centos_host1: Forwarding ports...
    centos_host1: 22 (guest) => 2200 (host) (adapter 1)
==> centos_host1: Running 'pre-boot' VM customizations...
==> centos_host1: Booting VM...
==> centos_host1: Waiting for machine to boot. This may take a few minutes...
    centos_host1: SSH address: 127.0.0.1:2200
    centos_host1: SSH username: vagrant
    centos_host1: SSH auth method: private key
    centos_host1: Warning: Remote connection disconnect. Retrying...
    centos_host1: 
    centos_host1: Vagrant insecure key detected. Vagrant will automatically replace
    centos_host1: this with a newly generated keypair for better security.
    centos_host1: 
    centos_host1: Inserting generated public key within guest...
    centos_host1: Removing insecure key from the guest if it's present...
    centos_host1: Key inserted! Disconnecting and reconnecting using new SSH key...
==> centos_host1: Machine booted and ready!
==> centos_host1: Checking for guest additions in VM...
    centos_host1: No guest additions were detected on the base box for this VM! Guest
    centos_host1: additions are required for forwarded ports, shared folders, host only
    centos_host1: networking, and more. If SSH fails on this machine, please install
    centos_host1: the guest additions and repackage the box to continue.
    centos_host1: 
    centos_host1: This is not an error message; everything may continue to work properly,
    centos_host1: in which case you may ignore this message.
==> centos_host1: Setting hostname...
==> centos_host1: Configuring and enabling network interfaces...
==> centos_host1: Rsyncing folder: /home/joseph/Projects/vagrant-getting-started/multi-machine-setup/ => /vagrant
````
